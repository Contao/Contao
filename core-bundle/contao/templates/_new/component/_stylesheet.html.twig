{#
    This component loads a stylesheet file and should typically be placed
    inside the document's <head>.

    By default, the stylesheet file will be loaded lazily. If instead you want
    the resource to block rendering until loaded, set "lazy" to false.

    Mandatory variables:
        @var string file

    Optional variables:
        @var bool lazy

    Note:
        You can either group all variables in an object named "stylesheet" or
        all directly in the context. Grouping under an object has precedence.
#}

{% block stylesheet_component %}
    {% set stylesheet = stylesheet|default(_context) %}
    {% set nonce = contao_csp_nonce('style-src') %}
    {% set style_attributes = attrs(style_attributes|default)
        .set('rel', 'stylesheet')
        .set('href', stylesheet.file)
        .set('nonce', nonce, nonce)
    %}

    {% if stylesheet.lazy is defined ? stylesheet.lazy : true %}
        {# Lazy load, see https://web.dev/defer-non-critical-css/ #}
        {% set lazy_style_attributes = attrs(style_attributes|default)
            .set('rel', 'preload')
            .set('as', 'style')
            .set('onload', 'this.onload=null;this.rel=\'stylesheet\'')
        %}

        <link{{ lazy_style_attributes }}>
        <noscript>
            <link{{ style_attributes }}>
        </noscript>
    {% else %}
        <link{{ style_attributes }}>
    {% endif %}
{% endblock %}
