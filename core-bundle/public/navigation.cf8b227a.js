!function(){"use strict";window.AccessibilityNavigation=class{constructor(t){this.options=this._merge({selector:"header .nav-main",toggle:"header .nav-toggle",minWidth:1024,classes:{submenuButton:"btn-toggle-submenu",expand:"nav-expanded",active:"is-active",bodyOpen:"navigation-open"},ariaLabels:{menu:"Menu",expand:"Expand menu: ",collapse:"Collapse menu: "}},t||{}),this.navigation=document.querySelector(this.options.selector),this.toggle=document.querySelector(this.options.toggle),this.navigation&&(this.state=!1,this.dropdowns=[],this.active=[],this._init(),this.dropdowns.forEach((t=>{this._initDropdown(t)})))}_merge(t,e){return[...new Set([...Object.keys(t),...Object.keys(e)])].reduce(((s,i)=>({...s,[i]:"object"==typeof t[i]?Object.assign({},t[i],e[i]):e[i]?e[i]:t[i]})),{})}_createSubMenuButton(){this.btn=document.createElement("button"),this.btn.classList.add(this.options.classes.submenuButton),this.btn.ariaHasPopup="true",this.btn.ariaExpanded="false"}_initFocusTrapTargets(){const t=[this.navigation.closest("#header")?.querySelector("a[href].logo"),...this.navigation.querySelectorAll("a[href]:not([disabled]), button:not([disabled])")];this.firstFocus=t[0]??[],this.lastFocus=t[t.length-1]??[]}_focusTrapEvent(t){"Tab"!==t.key&&9!==t.keyCode||(document.activeElement!==this.lastFocus||t.shiftKey||(t.preventDefault(),this.firstFocus?.focus()),document.activeElement===this.firstFocus&&t.shiftKey&&(t.preventDefault(),this.lastFocus?.focus()))}_toggleMenuState(){this.toggle.ariaExpanded=this.state?"false":"true",this.toggle.classList.toggle(this.options.classes.active,!this.state),this.navigation.classList.toggle(this.options.classes.active,!this.state),document.body.classList.toggle(this.options.classes.bodyOpen,!this.state),this.state=!this.state}_focusMenu(){this.state?document.addEventListener("keydown",this._focusTrapEvent,!1):document.removeEventListener("keydown",this._focusTrapEvent,!1)}_init(){this._createSubMenuButton(),this._initMobileToggleEvents(),this.navigation.ariaLabel||(this.navigation.ariaLabel=this.options.ariaLabels.menu),this.navigation.querySelectorAll("li").forEach((t=>{t.classList.contains("submenu")&&this.dropdowns.push(t);const e=t.firstElementChild;e.classList.contains("active")&&(e.ariaCurrent="page"),!e.ariaLabel&&e.title&&(e.ariaLabel=e.title,e.removeAttribute("title"))})),document.addEventListener("keyup",(t=>{"Escape"===t.key&&this._hideDropdown()}))}_updateAriaState(t,e){t.btn.ariaLabel=(e?this.options.ariaLabels.collapse:this.options.ariaLabels.expand)+t.btn.dataset.label,t.btn.ariaExpanded=e?"true":"false"}_collapseSubmenu(t){t.classList.remove(this.options.classes.expand),this._updateAriaState(t,!1)}_hideDropdown(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;0!==this.active.length&&(this.active.includes(t)?(this._collapseSubmenu(t),this.active=this.active.filter((e=>e!==t))):null===t||this.active[0]!==t&&!this.active[0].contains(t)?(this.active.forEach((t=>this._collapseSubmenu(t))),this.active=[]):this.active.filter((e=>!!e.contains(t)||(this._collapseSubmenu(e),!1))))}_showDropdown(t){this._hideDropdown(t),t.classList.add(this.options.classes.expand),this._updateAriaState(t,!0),this.active.includes(t)||this.active.push(t)}_toggleDropdownState(t,e){e?this._showDropdown(t):this._hideDropdown(t)}_addSubMenuButton(t){const e=t.firstElementChild,s=this.btn.cloneNode();t.btn=s,s.dataset.label=e.textContent,s.ariaLabel=this.options.ariaLabels.expand+e.textContent,s.addEventListener("click",(()=>{const e="false"===s.ariaExpanded??!0;this._toggleDropdownState(t,e)})),e.after(s)}_mouseEnter(t,e){this._toggleDropdownState(e,!0)}_mouseLeave(t,e){this._hideDropdown(e)}_focusOut(t,e){t.relatedTarget&&this.active.length>0&&!e.contains(t.relatedTarget)&&this._hideDropdown(e)}_initMobileToggleEvents(){this._initFocusTrapTargets(),this._focusTrapEvent=this._focusTrapEvent.bind(this),this.toggle?.addEventListener("click",(()=>{window.innerWidth>=this.options.minWidth||(this._toggleMenuState(),this._focusMenu())}))}_initDropdown(t){this._addSubMenuButton(t);const e=window.innerWidth>=this.options.minWidth;t.addEventListener("mouseenter",(s=>{e&&this._mouseEnter(s,t)})),t.addEventListener("mouseleave",(s=>{e&&this._mouseLeave(s,t)})),t.addEventListener("focusout",(s=>{e&&this._focusOut(s,t)}))}}}();