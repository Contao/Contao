window.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[data-ajax-form]").forEach((e=>{let t=null;function n(t,n,a,o){const r=new XMLHttpRequest;r.open(t,n,!0),r.setRequestHeader("Accept","text/html"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-Contao-Ajax-Form",e.querySelector('[name="FORM_SUBMIT"]').value),e.ariaBusy="true",e.dataset.ajaxForm="loading",r.onload=()=>{o(r),e.ariaBusy="false",e.dataset.ajaxForm="";const t=new CustomEvent("ajax-form-onload",{detail:{body:a,form:e,xhr:r}});e.dispatchEvent(t),window.dispatchEvent(t)},r.send(a||null)}!function e(a){a.addEventListener("submit",(o=>{o.preventDefault();const r=new FormData(a);t&&r.append(t.name,t.value),n("POST",a.action,r,(t=>{const n=t.getResponseHeader("X-Ajax-Location");if(n)return void(window.location.href=n);const o=document.createElement("template");o.innerHTML=t.responseText.trim();const r=o.content.firstElementChild;a.replaceWith(r),e(r)}))})),a.querySelectorAll('input[type="submit"], button[type="submit"]').forEach((e=>{e.addEventListener("click",(e=>t=e.currentTarget))}))}(e)}))}));