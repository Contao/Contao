!function(){"use strict";const e=new WeakMap;new MutationObserver((function(t){for(const r of t)"childList"===r.type&&r.addedNodes.forEach((function(t){t.querySelectorAll&&t.querySelectorAll(".tl_sectionwizard").forEach((t=>{if(e.has(t))return;e.set(t,!0);const r=t.querySelector("tbody"),n=e=>{Array.from(e.children).forEach(((e,t)=>{e.querySelectorAll("input, select").forEach((e=>{e.name=e.name.replace(/\[[0-9]+]/g,"["+t+"]")}))})),new Sortables(e,{constrain:!0,opacity:.6,handle:".drag-handle",onComplete:function(){n(e)}})},l=e=>{e.querySelectorAll("button").forEach((t=>{switch(t.dataset.command){case"copy":t.addEventListener("click",(()=>{Backend.getScrollOffset();const t=e.cloneNode(!0),o=e.querySelectorAll("select"),c=t.querySelectorAll("select");for(let e=0;e<o.length;e++)c[e].value=o[e].value;e.parentNode.insertBefore(t,e.nextSibling),l(t),n(r)}));break;case"delete":t.addEventListener("click",(()=>{Backend.getScrollOffset(),r.children.length>1?e.remove():(e.querySelectorAll("input").forEach((e=>{e.value=""})),e.querySelectorAll("select").forEach((e=>{e.value=e.children[0].value}))),n(r)}));break;default:t.classList.contains("drag-handle")&&t.addEventListener("keydown",(l=>{if("ArrowUp"===l.code||38===l.keyCode){l.preventDefault();let o=e.previousSibling;for(;o&&"TR"!==o.tagName;)o=o.previousSibling;o?o.insertAdjacentElement("beforebegin",e):r.insertAdjacentElement("beforeend",e),t.focus(),n(r)}else if("ArrowDown"===l.code||40===l.keyCode){l.preventDefault();let o=e.nextSibling;for(;o&&"TR"!==o.tagName;)o=o.nextSibling;o?o.insertAdjacentElement("afterend",e):r.insertAdjacentElement("afterbegin",e),t.focus(),n(r)}}))}}))};n(r),Array.from(r.children).forEach((e=>{l(e)}))}))}))})).observe(document,{attributes:!1,childList:!0,subtree:!0})}();