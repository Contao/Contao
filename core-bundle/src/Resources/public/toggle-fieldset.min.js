window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("legend[data-toggle-fieldset]").forEach((function(e){const t=e.parentNode;t.querySelectorAll("label.error, label.mandatory").length?t.classList.remove("collapsed"):t.classList.contains("hide")&&t.classList.add("collapsed");const{id:l,table:o}=JSON.parse(e.getAttribute("data-toggle-fieldset"));function s(e){fetch(window.location.href,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:"toggleFieldset",id:l,table:o,state:e,REQUEST_TOKEN:Contao.request_token})})}e.addEventListener("click",(function(l){if(l.preventDefault(),e.blur(),Backend.getScrollOffset(),t.classList.contains("collapsed"))t.classList.remove("collapsed"),s(1);else{const e=t.closest("form"),l=t.querySelectorAll("[required]");let o=!0;for(let e=0;e<l.length;e++)if(!l[e].value){o=!1;break}o?(t.classList.add("collapsed"),s(0)):"function"==typeof e.checkValidity&&e.querySelector('button[type="submit"]').click()}}))}))}));