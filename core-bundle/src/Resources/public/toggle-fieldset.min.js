window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("legend[data-toggle-fieldset]").forEach((function(e){const t=e.parentNode;t.querySelectorAll("label.error, label.mandatory").length?t.classList.remove("collapsed"):t.classList.contains("hide")&&t.classList.add("collapsed");const{id:l,table:o}=JSON.parse(e.getAttribute("data-toggle-fieldset"));e.addEventListener("click",(function(a){if(a.preventDefault(),e.blur(),Backend.getScrollOffset(),t.classList.contains("collapsed"))t.classList.remove("collapsed"),fetch(window.location.href,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:"toggleFieldset",id:l,table:o,state:1,REQUEST_TOKEN:Contao.request_token})});else{const e=t.closest("form"),a=t.querySelectorAll("[required]");let s=!0;for(let e=0;e<a.length;e++)if(!a[e].value){s=!1;break}s?(t.classList.add("collapsed"),fetch(window.location.href,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"},body:new URLSearchParams({action:"toggleFieldset",id:l,table:o,state:0,REQUEST_TOKEN:Contao.request_token})})):"function"==typeof e.checkValidity&&e.querySelector('button[type="submit"]').click()}}))}))}));