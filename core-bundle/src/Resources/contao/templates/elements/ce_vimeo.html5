<?php $this->extend('block_unsearchable'); ?>

<?php $this->block('content'); ?>

  <figure class="video_container">
    <?php if ($this->aspect): ?>
      <div class="responsive ratio-<?= $this->aspect ?>">
    <?php endif; ?>
      <?php if ($this->videoSplash): ?>
        <figure id="videoSplash<?= $this->id ?>" class="image_container" data-video="<?= $this->src ?>">
          <?php $this->insert('picture_default', $this->splashImage->picture); ?>
        </figure>
        <script>
          document.getElementById('videoSplash<?= $this->id ?>').addEventListener('click', function(e) {
            var iframe = document.createElement('iframe');
            iframe.src = this.dataset['video'];
            iframe.width = <?= $this->width ?>;
            iframe.height = <?= $this->height ?>;
            iframe.setAttribute('allowfullscreen', '');
            this.parentNode.replaceChild(iframe, this);
          });
        </script>
      <?php else: ?>
        <iframe<?= $this->size ?> src="<?= $this->src ?>" allowfullscreen></iframe>
      <?php endif; ?>
    <?php if ($this->aspect): ?>
      </div>
    <?php endif; ?>
    <?php if ($this->caption): ?>
      <figcaption class="caption"><?= $this->caption ?></figcaption>
    <?php endif; ?>
  </figure>

<?php $this->endblock(); ?>
